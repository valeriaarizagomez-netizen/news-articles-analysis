Authors: Valeria Ariza Gomez, Gwendolyn Mingham, Stefanie Walter
Title: Patterns and Contrasts: two decades of minoritized groups portrayal.    
Year: 2025

project-root/
│
├── code/                         # All analysis scripts
│   ├── 00_data_extraction.R
│   ├── 01_topic_analysis.R
│   ├── 02_sentiment_analysis.ipynb
│   ├── 03_stance_analysis.py
│   ├── 04_intersectional_mentions.R
│   ├── 05_figures_topics.R
│   ├── 05_figures_sentiment_timeseries.R
│   ├── 05_figures_proportional_salience.R
│   ├── 05_figures_proportional_centering.R
│   └── 05_figures_intersectional_mentions.R
│
├── data/
│   ├── raw/                      # Confidential raw Factiva data (NOT INCLUDED)
│   ├── processed/                # Cleaned .RDS files (NOT INCLUDED)
│   └── graphs/                   # Excel sheets required for figure replication
│        ├── saliencefocus.xlsx
│        ├── proportionalsalience.xlsx
│        ├── proportional_centering.xlsx
│        ├── sentiment.xlsx
│        └── intersection.xlsx
│
├── output/
│   ├── figures/                 # All generated figures
│   └── tables/                  # (Optional) exported tables
│
└── dictionary/
    └── topics.yml               # Topic dictionary used in seeded LDA


Data Availability Statement: 
Raw Factiva data cannot be shared

Due to copyright restrictions from Factiva/Dow Jones, the raw news articles (2002–2021) cannot be redistributed.

However, this repository includes:

all code needed to reproduce the analysis, clear folder structures, detailed documentation, all dictionaries and hyperparameters, Excel summary sheets needed to reproduce all figures, a description of the preprocessing pipeline so that users can re-run everything if they have legal access to Factiva.

Software Requirements 

R (≥ 4.2)
Required packages: 
dplyr
tidyr
ggplot2
readxl
quanteda
quanteda.textmodels
quanteda.textstats
seededlda
lubridate
tidytext
tibble
fs

Python 3.10+

Required Python packages (for stance analysis):

pandas
numpy
transformers
torch
scikit-learn

How to Run the Replication

Below is a step-by-step pipeline for replicating the article.

Step 1: Data Extraction (00_data_extraction.R)

Only needed if the user has valid access to Factiva.

This script:

connects to a DuckDB database,

filters articles from 2002–2021,

extracts four groups using keyword dictionaries:

Migrants

LGBTQ+

Religious minorities

Disabled people

Outputs are saved as .RDS files inside:

data/processed/<GROUP>/<YEAR>.RDS

Step 2: Topic Analysis (01_topic_analysis.R)

This script:

loads all .RDS files for a group, tokenizes text, removes stopwords and symbols, constructs a DFM, applies seeded LDA using dictionary/topics.yml, assigns each document its dominant topic if θ_max > 0.5,

outputs:

per-document topic assignments

per-year topic aggregates

topics_evolution_all_groups.pdf

Step 3: Sentiment Analysis (02_sentiment_analysis.ipynb)

This notebook:

loads each group’s articles,applies a pretrained transformer model for sentiment, aggregates scores per year,
outputs CSV files stored at

data/sentiment/results final/


These files feed into the R figure scripts.

Step 4: Stance Analysis (03_stance_analysis.py)

This Python script:

loads processed data, applies a transformer stance classifier

outputs: predicted stance labels, model probability scores, yearly stance proportions

These are used in the plotting script:
05_figures_stance.R

Step 5: Intersectional Mentions (04_intersectional_mentions.R)

This script identifies instances where:

Migrants mention religious minorities/LGBTQ+ articles mention disabled people/etc.

Outputs include:

keyword frequencies

document frequencies

KWIC samples

The final plot is generated by:

05_figures_intersectional_mentions.R

Step 6: Figure Replication

All figures in the paper can be reproduced by running:

source("code/05_figures_topics.R")
source("code/05_figures_sentiment_timeseries.R")
source("code/05_figures_proportional_salience.R")
source("code/05_figures_proportional_centering.R")
source("code/05_figures_intersectional_mentions.R")


They will appear in:

output/figures/

Materials Included in This Repository
 Topic dictionary (topics.yml)
 All figure-generating scripts
 All Excel summary sheets needed for figure replication
 Full stance and sentiment model scripts
 Detailed code to replicate preprocessing and classification
 Complete documentation for replication


Materials NOT Included
Item	Reason
Raw Factiva articles	Copyright restrictions
Processed .RDS article files	Derived from restricted data
Model checkpoints (sentiment / stance)	Large size + license restrictions


Notes for Reviewers

All statistical outputs and visualizations can be reproduced from the Excel summary sheets contained in data/graphs/.

These sheets are directly generated from the processed data and are fully sufficient to replicate every figure in the manuscript.

Users with access to Factiva may fully reproduce the pipeline end-to-end.

Contact

For questions about the replication package, please contact:

Valeria Ariza Gomez
valeria.ariza@tum.de
